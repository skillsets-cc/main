---
name: audit_skillset
description: Validates a skillset directory before submission to skillsets.cc
---

# Audit Skillset

Validates a skillset directory structure and generates an audit report before submission to skillsets.cc registry.

## Purpose

This skill performs comprehensive validation of a skillset directory to ensure it meets all requirements for submission to the skillsets.cc registry. It checks the manifest schema, required files, content structure, and common issues like large files, binaries, and secret patterns.

## Usage

1. Navigate to your skillset directory (the folder containing `skillset.yaml`)
2. Run this skill using `/audit_skillset`
3. Review the generated `AUDIT_REPORT.md`
4. Fix any issues flagged as FAILED
5. Re-run until all checks pass
6. Include the passing `AUDIT_REPORT.md` in your PR submission

## Validation Checks

### 1. Manifest Validation

Check that `skillset.yaml` exists and validate against the JSON Schema.

**Required fields:**
- `schema_version`: Must be "1.0"
- `name`: Alphanumeric, hyphens, underscores only (1-100 chars)
- `version`: Semantic version format (e.g., 1.0.0)
- `description`: 10-200 characters
- `author.handle`: GitHub handle format (@username)
- `verification.production_url`: Valid URI
- `verification.audit_report`: Path to this audit report
- `tags`: 1-10 tags, lowercase, hyphens only

**Instructions:**
1. Read `/home/nook/Documents/code/skillsets.cc/schema/skillset.schema.json`
2. Read `skillset.yaml` in the current directory
3. Parse the YAML and validate each field against schema requirements
4. Record PASS/FAIL with specific error messages

### 2. Required Files Check

Verify all required files are present:

- `README.md`: Installation and usage instructions
- `AUDIT_REPORT.md`: Will be generated by this skill
- `content/`: Directory containing the skillset files

**Instructions:**
1. Check if `README.md` exists
2. Check if `content/` directory exists
3. Record PASS/FAIL for each

### 3. Content Structure Verification

Verify that `content/` contains either:
- `.claude/` directory (standard Claude Code structure), OR
- `CLAUDE.md` file (project instructions)

At least one must be present.

**Instructions:**
1. Check if `content/.claude/` directory exists
2. Check if `content/CLAUDE.md` file exists
3. Record PASS if at least one exists, FAIL if neither

### 4. File Size Check

Detect any files larger than 1MB (1048576 bytes).

**Instructions:**
1. Recursively scan all files in the skillset directory
2. Calculate size of each file
3. Flag any files exceeding 1MB
4. Record PASS if no large files, WARNING if large files found
5. List all large files with their sizes

### 5. Binary File Detection

Detect binary files in the `content/` directory. Text files are acceptable, but binaries should be avoided.

**Common text file extensions to ALLOW:**
- `.md`, `.txt`, `.json`, `.yaml`, `.yml`
- `.js`, `.ts`, `.tsx`, `.jsx`
- `.py`, `.sh`, `.bash`
- `.astro`, `.html`, `.css`, `.scss`
- `.toml`, `.conf`, `.env.example`

**Instructions:**
1. Scan files in `content/` directory recursively
2. Check file extensions against allowed list
3. For files without text extensions, sample first 512 bytes for null bytes
4. Record WARNING if binary files detected
5. List all binary files found

### 6. Secret Pattern Detection

Scan for potential secrets, API keys, tokens, and passwords.

**Patterns to detect (case-insensitive):**
- `api[_-]?key\s*[:=]\s*['"]?[a-zA-Z0-9]{20,}`
- `password\s*[:=]\s*['"]?[^'"\s]{8,}`
- `secret\s*[:=]\s*['"]?[a-zA-Z0-9]{20,}`
- `token\s*[:=]\s*['"]?[a-zA-Z0-9]{20,}`
- `bearer\s*[:=]\s*['"]?[a-zA-Z0-9]{20,}`
- `authorization\s*[:=]\s*['"]?[a-zA-Z0-9]{20,}`
- `AKIA[0-9A-Z]{16}` (AWS access key pattern)
- `ghp_[a-zA-Z0-9]{36}` (GitHub personal access token)
- `sk-[a-zA-Z0-9]{48}` (OpenAI API key)

**Files to scan:**
- All `.md`, `.txt`, `.json`, `.yaml`, `.yml` files
- Skip `AUDIT_REPORT.md` (will contain these patterns in documentation)

**Instructions:**
1. Scan text files for secret patterns using regex
2. Record FAIL if secrets detected with file path and line number
3. Record PASS if no secrets found
4. Provide remediation guidance if secrets found

## Generating the Audit Report

After completing all validation checks, generate `AUDIT_REPORT.md` using the template at `/home/nook/Documents/code/skillsets.cc/tools/audit_skillset/templates/AUDIT_REPORT_TEMPLATE.md`.

**Instructions:**
1. Read the template file
2. Fill in all placeholders with actual values:
   - Timestamp: Current date and time in ISO format
   - Skillset name: From `skillset.yaml`
   - Skillset version: From `skillset.yaml`
   - Author: From `skillset.yaml`
   - Each check result (PASS/FAIL/WARNING)
   - File inventory with sizes
   - Detailed findings for any issues
   - Overall ready-for-submission status
3. Write the completed report to `AUDIT_REPORT.md` in the current directory
4. Display a summary to the user

## Success Criteria

All of the following must be true for a successful audit:

- [ ] `skillset.yaml` exists and validates against schema
- [ ] All required fields in `skillset.yaml` are present and valid
- [ ] `README.md` exists
- [ ] `content/` directory exists
- [ ] `content/` contains `.claude/` OR `CLAUDE.md`
- [ ] No files exceed 1MB
- [ ] No secrets detected
- [ ] `AUDIT_REPORT.md` generated successfully

**Note:** Binary files are a WARNING, not a failure. Contributors should justify their inclusion in the PR description.

## Remediation Guidance

### If manifest validation fails:
- Review the JSON Schema at `/schema/skillset.schema.json`
- Ensure all required fields are present
- Check field formats (semver for version, URI for URLs, etc.)
- Verify author handle includes @ prefix

### If required files are missing:
- Create `README.md` with installation and usage instructions
- Ensure `content/` directory contains your skillset files
- Include either `.claude/` directory or `CLAUDE.md` in `content/`

### If large files detected:
- Consider compressing or splitting large files
- Move large assets to external hosting (link in README)
- Justify if files are necessarily large

### If binary files detected:
- Convert to text formats where possible
- Remove unnecessary binaries
- Justify in PR description if binaries are required

### If secrets detected:
- Remove all API keys, tokens, and passwords
- Use placeholder values (e.g., `YOUR_API_KEY_HERE`)
- Create `.env.example` files instead of `.env` with secrets
- Use environment variable references in code

## Example Output

```
Audit Skillset - Validation Complete

Skillset: The_Skillset v1.0.0
Author: @supercollectible

✓ PASS - Manifest validation
✓ PASS - Required files present
✓ PASS - Content structure valid
✓ PASS - No large files detected
⚠ WARNING - 1 binary file found (justified in README)
✓ PASS - No secrets detected

Status: READY FOR SUBMISSION

Generated: AUDIT_REPORT.md

Next steps:
1. Review AUDIT_REPORT.md
2. Address any warnings if needed
3. Include AUDIT_REPORT.md in your PR
4. Submit PR to skillsets-cc/main
```

## Notes

- This skill should be run in the root directory of your skillset (where `skillset.yaml` is located)
- The skill reads the JSON Schema from the skillsets.cc repository
- Re-run this skill after making any changes to your skillset
- The audit report will be overwritten each time you run this skill
